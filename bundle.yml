bundles:
  lib:
    - lib

  frontend:
    - core
    - common

  backend:
    - core
    - admin


packages:
  admin:
    depends:
      - lib

    client:
      root:       "./client/admin"
      include:    "*.js"
      exclude:    "/(^|\\/|\\\\)_.*/"

    #views:
    #  root:       "./client/admin"
    #  include:    "*.jade"
    #  exclude:    "/(^|\\/|\\\\)_.*/"

    views:
      root:       "./client/admin"
      include:    "*.jade"
      exclude:    "/(^|\\/|\\\\)_.*/"

    i18n_client:
      root:       "./client/admin"
      include:    "i18n/*.yml"

    #styles:
    #  root:       "./client/admin"
    #  main:       "app.styl"
    #  include:    "*.styl"

    styles:
      root:       "./assets"
      main:       "desktop/admin/app.styl"
      include:    "desktop/admin/**.styl"

    server:
      root:       "./server/admin"
      include:    "*.js"
      exclude:    "/(^|\\/|\\\\)_.*/"

    i18n_server:
      root:       "./server/admin"
      include:    "i18n/*.yml"


  common:
    depends:
      - lib

    client:
      root:       "./client/common"
      include:    "*.js"
      exclude:    "/(^|\\/|\\\\)_.*/"

    #views:
    #  root:       "./client/common"
    #  include:    "*.jade"
    #  exclude:    "/(^|\\/|\\\\)_.*/"

    views:
      root:       "./client/common"
      include:    "*.jade"
      exclude:    "/(^|\\/|\\\\)_.*/"

    i18n_client:
      root:       "./client/common"
      include:    "i18n/*.yml"

    styles:
      root:       "./"
      main:       "assets/desktop/common/app.styl"
      exclude:    "/(^|\\/|\\\\)_.*/"
      include:
        - "assets/desktop/common/**.styl"
        - "client/common/**.styl"

    #styles:
    #  root:       "./client/common"
    #  main:       "app.styl"
    #  include:    "*.styl"

    server:
      root:       "./server/common"
      include:    "*.js"
      exclude:    "/(^|\\/|\\\\)_.*/"

    i18n_server:
      root:       "./server/common"
      include:    "i18n/*.yml"


  core:
    server:
      root:       "./server/core"
      include:    "*.js"
      exclude:    "/(^|\\/|\\\\)_.*/"

    # Remove later, client layout should be in `common` 
    views:
      root:       "./views/desktop/layouts"
      include:    "*.jade"
      exclude:    "/(^|\\/|\\\\)_.*/"
      apiPrefix:  "layouts"


  lib:
    vendor:
      - "lodash"

    client:
      root:       "./assets"
      main:       "javascripts/lib.js"

    bin:
      root:       "./assets"
      include:
        - javascripts/loader.js.ejs
        - vendor/es5-shim.js
        - vendor/json2.js
