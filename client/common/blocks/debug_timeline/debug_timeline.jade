//- Generates nested list for timeline

mixin timeline_scope(scope)
  - var metaline;
  li.debug-timeline__item
    span.debug-timeline__period #{scope.elapsed.total.toFixed(2)}ms 
    | - #{scope.message} 
    - if (scope.elapsed.missed > 0)
      | [missed #{scope.elapsed.missed.toFixed(2)}ms] 
    - metaline = JSON.stringify(scope.meta);
    - if (metaline !== '{}')
      | #{metaline}

    - if (scope.childs.length)
      mixin timeline_items(scope.childs)

mixin timeline_items(scopes)
  ul.debug-timeline__scope
    - each scope in scopes
      mixin timeline_scope(scope)

#debug_timeline.debug-timeline
  mixin timeline_items(self.stats)
