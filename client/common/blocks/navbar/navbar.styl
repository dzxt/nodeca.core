@import "nodeca.core/client/common/_variables"


.navbar
  box-shadow 0 1px 3px rgba(0, 0, 0, 0.05)
  // We use .container-fluid inside, it has padding already
  padding-left 0
  padding-right 0

.navbar-brand
  text-transform uppercase
  margin-right $spacer * 4

.navbar-nav .nav-item
  //font-size $font-size-sm
  position relative

  // override bootstrap default margin
  & + .nav-item
    margin-left $spacer * 2

.navbar-toggler
  color $navbar-dark-color

  &:focus
    color $navbar-dark-hover-color

.navbar-nav > .nav-item > a:after
.navbar__level-up:after
  position absolute
  left -($spacer)
  right -($spacer)
  bottom -($navbar-padding-y)
  height 0.125rem
  content ''
  background-color $brand-primary + 27%
  opacity 0
  transition opacity .3s ease


$grid-float-breakpoint = 600px

@media (min-width: $grid-float-breakpoint)
  .navbar-toggler
    display none
  .navbar-toggleable
    display block !important

@media (max-width: $grid-float-breakpoint - 1)
  .navbar-toggleable
    .navbar-nav .nav-item
      float none
      margin-left 0
    .navbar-nav
      float none !important

  .navbar-toggler
    display inline-block

  // align toggler to the right without using float
  .navbar-header
    text-align right
  // but still keep left align in brand to hide shifted text
  .navbar-brand
    text-align left

  // make default navbar links display block at chosen breakpoint, copied from
  // https://github.com/twbs/bootstrap/issues/17532#issuecomment-220604022
  .navbar-collapse
    .navbar-nav .nav-item + .nav-item
      margin-left 0

    .dropdown-menu
      position relative
      float none

    // reset underline position
    .navbar-nav > .nav-item > a:after
    .navbar__level-up:after
      left 0
      right 0
      bottom 0


.navbar-nav > .nav-item.active > a:after
.navbar-nav > .nav-item:hover > a:after
.navbar__level-up:hover:after
  opacity 1

.navbar__level-up
  position relative
  padding-left .8rem
  padding-right .8rem
  margin-left -.8rem
  margin-right .7rem // -.7rem + 2 rem - .5rem
  color $navbar-dark-color
  &:hover
    color $navbar-dark-color
  &:after
    left 0 !important
    right 0 !important
//
// Alternate navigation. Shown when `navbar__m-secondary` modifier is added
//
.navbar-primary
  .navbar-inner
    opacity 1
    transition opacity .3s linear

.navbar-alt
  top -($nav-panel-height)
  background-color transparent !important
  transition top .001s linear .3s
  .navbar-inner
    opacity 0
    transition opacity .3s linear

.visible-nav-alt
  display none

.navbar-alt
  .visible-nav-alt
    display inline-block
  .hidden-nav-alt
    display none

.navbar__m-secondary
  .navbar-collapse
    display none  // hide expanded menu
  &.navbar-primary .navbar-inner
    opacity 0
  &.navbar-alt
    top 0px
    transition top .001s linear
    .navbar-inner
      opacity 1

.navbar-alt__title
  padding .425rem 1rem .425rem 0
  shortable()

.navbar-alt .btn
  opacity .7


//
// Alternate header (progress bar instead of a brand).
// Shown when `navbar__m-progress` modifier is added
//
.navbar-progress
  display none

.navbar__m-progress
  .navbar-brand
    display none

  .navbar-progress
    display block
