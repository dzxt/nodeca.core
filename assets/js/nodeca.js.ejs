/*global window, nodeca*/

//= require_self
//= require_tree ./nodeca

var nodeca = window.nodeca = (function (nodeca) {
  'use strict';

  nodeca.runtime.env      = "<%= env() %>";
  nodeca.runtime.version  = "<%= version() %>";

  <% if ('development' === env()) { %>
    nodeca.logger = {
      assert : _.bind(console.assert || console.debug || console.log || $.noop, console),
      error  : _.bind(console.error || console.log || $.noop, console),
      info   : _.bind(console.info || console.log || $.noop, console),
      debug  : _.bind(console.debug || console.log || $.noop, console)
    };
  <% } else { %>
    nodeca.logger = {
      assert : $.noop,
      error  : $.noop,
      info   : $.noop,
      debug  : $.noop
    };
  <% } %>

  nodeca.runtime.router = new Pointer();

  // fill in routes
  _.each(<%= jason(nodeca.runtime.routes_config) %>, function (v) {
    nodeca.runtime.router.addRoute(v[0], v[1]);
  });

  return nodeca;
}({}));

// vim: syntax=javascript
